# Server Config
server.servlet.context-path=/

# Spring Cloud
spring.application.name=API-GATEWAY
spring.profiles.active=dev
spring.config.import=optional:configserver:http://localhost:9296
spring.zipkin.base-url=http://localhost:9411/

# Gateway Routes
spring.cloud.gateway.default-filters[0]=DedupeResponseHeader=Access-Control-Allow-Credentials Access-Control-Allow-Origin, RETAIN_UNIQUE

# CORS Configuration
spring.cloud.gateway.globalcors.add-to-simple-url-handler-mapping=true
spring.cloud.gateway.globalcors.cors-configurations.[/**].allowed-origins=http://localhost:4200
spring.cloud.gateway.globalcors.cors-configurations.[/**].allowed-headers=*
spring.cloud.gateway.globalcors.cors-configurations.[/**].exposed-headers=*
spring.cloud.gateway.globalcors.cors-configurations.[/**].allow-credentials=true
spring.cloud.gateway.globalcors.cors-configurations.[/**].allowed-methods=GET,POST,PUT,DELETE,PATCH,OPTIONS

# Routes
spring.cloud.gateway.routes[0].id=ORDER-SERVICE
spring.cloud.gateway.routes[0].uri=lb://ORDER-SERVICE
spring.cloud.gateway.routes[0].predicates[0]=Path=/order-service/**

spring.cloud.gateway.routes[1].id=PAYMENT-SERVICE
spring.cloud.gateway.routes[1].uri=lb://PAYMENT-SERVICE
spring.cloud.gateway.routes[1].predicates[0]=Path=/payment-service/**

spring.cloud.gateway.routes[2].id=PRODUCT-SERVICE
spring.cloud.gateway.routes[2].uri=lb://PRODUCT-SERVICE
spring.cloud.gateway.routes[2].predicates[0]=Path=/product-service/**

spring.cloud.gateway.routes[3].id=SHIPPING-SERVICE
spring.cloud.gateway.routes[3].uri=lb://SHIPPING-SERVICE
spring.cloud.gateway.routes[3].predicates[0]=Path=/shipping-service/**

spring.cloud.gateway.routes[4].id=USER-SERVICE
spring.cloud.gateway.routes[4].uri=lb://USER-SERVICE
spring.cloud.gateway.routes[4].predicates[0]=Path=/user-service/**

spring.cloud.gateway.routes[5].id=FAVOURITE-SERVICE
spring.cloud.gateway.routes[5].uri=lb://FAVOURITE-SERVICE
spring.cloud.gateway.routes[5].predicates[0]=Path=/favourite-service/**

spring.cloud.gateway.routes[6].id=PROXY-CLIENT
spring.cloud.gateway.routes[6].uri=lb://PROXY-CLIENT
spring.cloud.gateway.routes[6].predicates[0]=Path=/app/**

# Resilience4J Circuit Breaker
resilience4j.circuitbreaker.instances.apiGateway.register-health-indicator=true
resilience4j.circuitbreaker.instances.apiGateway.event-consumer-buffer-size=10
resilience4j.circuitbreaker.instances.apiGateway.automatic-transition-from-open-to-half-open-enabled=true
resilience4j.circuitbreaker.instances.apiGateway.failure-rate-threshold=50
resilience4j.circuitbreaker.instances.apiGateway.minimum-number-of-calls=5
resilience4j.circuitbreaker.instances.apiGateway.permitted-number-of-calls-in-half-open-state=3
resilience4j.circuitbreaker.instances.apiGateway.sliding-window-size=10
resilience4j.circuitbreaker.instances.apiGateway.wait-duration-in-open-state=5s
resilience4j.circuitbreaker.instances.apiGateway.sliding-window-type=COUNT_BASED

# Management
management.health.circuitbreakers.enabled=true
management.endpoint.health.show-details=always
management.endpoints.web.exposure.include=*

# JWT
jwt.secret=your-secret-key-minimum-32-characters-for-hs256-algorithm
